---
import "../layout.css";
import { getCollection } from "astro:content";
import Search from "astro-pagefind/components/Search";

const allDocs = await getCollection("docs");

const base = import.meta.env.BASE_URL;
---

<header class="sticky top-0 z-10">
  <div class="background absolute inset-0 -z-1"></div>

  <div class="max-w-[1200px] px-4 mx-auto flex items-center justify-between gap-6 py-5">
    <div class="flex-none">
      <a href={base}>
        <img src="../../../assets/atrium-light.png" class="h-12" />
      </a>
    </div>

    <nav class="flex-1 px-6">
      <ul class="flex gap-4 flex-wrap">
        {allDocs.map(doc => {
          const parts = doc.id.split("/");

          if(parts.length === 1) {
            return <li><a href={`/${[...base.split("/"), ...doc.id.split("/")].filter(Boolean).join("/")}`}>{doc.data.title}</a></li>
          }
        }).filter(Boolean)}
      </ul>
    </nav>

    <Search id="search" />
  </div>
</header>

<style>
header {
}

.background {
  background: linear-gradient(360deg,rgba(255,255,255,0.125) 0%,rgba(247,247,247,1) 100%);
  /* mask-image: linear-gradient(to top, hsl(0deg 0% 0% / 0%) 0%, #000000 90%); */
  backdrop-filter: blur(12px);
  margin-bottom: -8px;
}
</style>
