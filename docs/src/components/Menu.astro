---
import { getCollection } from "astro:content";

const allDocs = await getCollection("docs");

const base = import.meta.env.BASE_URL;
---

<nav>
  <ul class="flex md:hidden gap-module-2xl">
    {allDocs.map(doc => {
      const parts = doc.id.split("/");

      if(parts.length === 1) {
        return (
          <li>
            <a
              class="text-link [&[aria-current]]:text-link-active font-medium"
              href={`/${[...base.split("/"), ...doc.id.split("/")].filter(Boolean).join("/")}`}
            >
              <span>{doc.data.title}</span>
            </a>
          </li>
        )
      }
    }).filter(Boolean)}
  </ul>

  <ul class="hidden md:flex gap-module-2xl">
    {allDocs.map(doc => {
      const parts = doc.id.split("/");

      if(parts.length === 1) {
        return (
          <li>
            <a
              class="text-link [&[aria-current]]:text-link-active font-medium"
              href={`/${[...base.split("/"), ...doc.id.split("/")].filter(Boolean).join("/")}`}
            >
              <span>{doc.data.title}</span>
            </a>
          </li>
        )
      }
    }).filter(Boolean)}
  </ul>
</nav>
